# 06 知识库：你的私有大脑

[返回总览](../GitHubPages用户引导.md) · [上一页：文生图](05-文生图.md) · [下一页：MCP](07-MCP.md)

## 适用场景
- 让模型基于私有文档回答问题，减少遗漏与幻觉。
- FAQ、产品手册、代码注释、长报告的问答。

## 你会得到
- 从“启动嵌入服务→入库→检索”的完整操作。
- 如何在“约定”里启用知识库工具。

## 前置准备
1. 在“增殖-知识库”选择嵌入模型并启动（会自动以 `--embedding` 模式启动 llama.cpp）。
2. 准备要入库的文本（可拆分为章节/段落）。

## 操作步骤
1. 在“增殖-知识库”上传或粘贴文本，按段入库（系统会调用 `/v1/embeddings` 存入向量库）。
2. 在“约定”勾选“知识库”工具，保存后会自动重置上下文生效。
3. 返回对话区提问，模型会自动发起知识库查询，返回匹配度最高的片段。
4. 继续多轮对话时，知识库会保持可用，直到你关闭或重置。

## 进阶提示
- 结构化入库：按章节/段落清晰命名，检索更准确。
- 如果回答过度引用或不够引用，可在问题里说明“仅基于知识库回答/请标注引用”。
- 嵌入服务启动慢时，可降低并发或提前在启动页检查显存。

## 常见问题
- 无匹配：检查是否已启动嵌入服务、文档是否成功入库；可以调大 Top-N。
- 维度不符：查看嵌入服务日志，确认模型维度；必要时重启并清理向量库。
- 结果和事实不符：让模型列出引用片段，再让它根据引用重新作答。

## 验收要点
- 入库后能检索并返回带匹配度的片段。
- 模型回答能引用或基于匹配结果。

## 截图占位
![知识库页面占位](../images/pages/06-rag.png)
