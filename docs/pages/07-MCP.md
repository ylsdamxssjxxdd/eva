# 07 MCP：连接外部服务的万用接口

[返回总览](../GitHubPages用户引导.md) · [上一页：知识库](06-知识库.md) · [下一页：系统工程师](08-系统工程师.md)

## 适用场景
- 把外部 API、数据库或业务系统接入 EVA。
- 需要让模型通过工具完成查询、写入或自动化流程。

## 你会得到
- 配置 MCP 服务与调用的基本流程。
- 工具响应在对话中的呈现方式。

## 前置准备
1. 准备好 MCP 服务器地址与服务名（如 `service@tool`）。
2. 在“约定”中可挂载 MCP 工具（开启后会把调用方法写入系统提示词）。

## 操作步骤
1. 打开“约定”，勾选 MCP，填写/选择 MCP 服务配置。
2. 保存约定，系统会重置上下文以加载工具。
3. 在对话中提出需求，模型若需调用 MCP，会输出 `<tool>...</tool>`。
4. EVA 执行 MCP 调用后，结果以 `tool_response: ...` 形式回填，并自动继续推理。
5. 直到模型不再发起新工具调用，对话结束。

## 进阶提示
- 在提示里给出调用示例、限流规则与安全边界，模型会更稳。
- 若工具有副作用（写数据库/发请求），可先在沙盒里验证。
- 可以为不同服务配置不同别名，方便模型选择正确的目标。

## 常见问题
- 超时/无回应：检查 MCP 服务器是否可达，地址/端口正确；网络是否被防火墙拦截。
- 参数错误：在对话里要求模型“先打印将要调用的参数”，再确认执行。
- 多个服务冲突：在问题里明确指出目标服务名或资源名称。

## 验收要点
- 对话中能出现 MCP 工具调用，返回结果可继续推理。
- 异常时能看到报错信息，便于调整配置。

## 截图占位
![MCP 页面占位](../images/pages/07-mcp.png)
