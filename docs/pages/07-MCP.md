# 07 MCP：连接外部服务

[返回总览](GitHubPages用户引导.md) · [上一页：知识库](06-知识库.md) · [下一页：系统工程师](08-系统工程师.md)

## 🎯 适用场景
- 把外部 API、数据库或业务系统接入 EVA。
- 需要让模型调用现有服务完成查询、写入或自动化。

## 📦 你会得到
- MCP 服务配置与调用流程。
- 对话中工具回显与继续推理的方式。

## 🛠️ 前置准备
1. 准备 MCP 服务器地址与服务名（如 `service@tool`）。
2. 在“约定”中勾选 MCP 工具，写入调用说明/限流规则。

## 🚀 操作步骤
1. 打开“约定”，启用 MCP，填写服务配置。
2. 保存后重置上下文加载工具。
3. 在对话描述需求；模型会输出 `<tool>...</tool>` 触发 MCP 调用。
4. EVA 执行后以 `tool_response:` 回填，模型继续生成，直到不再发起新调用。

## 🧠 小技巧
- 提前写好示例调用和安全边界，减少误操作。
- 有副作用的操作（写库/发请求）可先用沙盒验证。
- 多服务共存时，在提问里指明目标服务或资源。

## ❓ 常见问题
- 超时/无回应：检查 MCP 服务器可达性、防火墙、端口。
- 参数错乱：让模型“先打印将要调用的参数”再执行。
- 服务冲突：在问题里明确服务名或限定资源。

## 🖼️ 页面示意
![MCP 页面示意](../images/pages/07-mcp.png)
