# EVA 机体：一款轻量 Agent 桌面端拘束器

欢迎使用 EVA —— 一个基于“约定框架”的智能体桌面应用，灵感源自《新世纪福音战士》。EVA 将大语言模型（驾驶员）装载到机体中，通过工具调用与现实世界交互，帮助指挥员（您）完成复杂任务。

本页提供**最快上手路径**与**全功能导航**；若需更深入的原理与接口，请参阅 [软件技术说明书](软件技术说明书.md)。

![EVA 机体界面预览](images/hero-placeholder.png)

## 核心亮点
- **双模式装载**：本地模式（离线、低延迟）与链接模式（云端 API），首次启动会自动扫描 `EVA_BACKEND/EVA_MODELS` 选择可用后端与最小模型。
- **多模态对话**：文本、图片、文档、音频/录音一并发送，支持 reasoning 块显示。
- **工具调用**：计算器、文生图、知识库、系统工程师、MCP、技能挂载、沙盒等，模型可自主循环调用。
- **安全与隔离**：Docker 沙盒可选；机体控制默认关闭，需手动开启才允许远程操控。

## 三步快速开始（约 3 分钟）
1. **选择模式并装载**
   - 本地：点击“装载”→选择 GGUF 模型（默认指向最小模型）→等待“模型日志”出现 `listening on`/`ready`。
   - 链接：点击“装载”→填写 `endpoint/key/model`（端点含 `/v1`）→切换到远端，状态灯变“正常”。
2. **发送第一条消息**
   - 输入文本，必要时附加图片/文档/音频（拖拽或 F1/F2）。
   - 按 `Ctrl+Enter` 或点“发送”，流式查看回复；状态灯“推理中”时仅“重置”可用。
3. **继续或重置**
   - 多轮对话会保留上下文；进度条接近满时可点“重置”，第一次中断流式，第二次清空并重新注入系统提示。

详细步骤请看对应功能页。

## 功能导航（按顺序体验，或按需跳转）
1.  **[对话：日常聊天](pages/01-对话.md)** – 基础聊天、多模态输入、状态灯与快捷键。
2.  **[补完：初始形态](pages/02-补完.md)** – 一次性长文/代码续写，单轮重置不带历史。
3.  **[语音交互：开麦即聊](pages/03-语音交互.md)** – F2 录音转写、音频上传、Whisper 选择。
4.  **[视觉交互：看图说话](pages/04-视觉交互.md)** – 截图/上传、多图提问、视觉模型挂载。
5.  **[文生图：幻想成真](pages/05-文生图.md)** – Stable Diffusion/Flux 生成流程、参数与风格技巧。
6.  **[知识库：你的私有仓库](pages/06-知识库.md)** – 嵌入服务、入库/检索、引用回答。
7.  **[MCP：连接外部服务](pages/07-MCP.md)** – SSE/streamable/stdio 接入、工具回填与多服务协同。
8.  **[系统工程师：命令与编程协作](pages/08-系统工程师.md)** – 命令/读写/ptc 脚本、工作目录与安全限制。
9.  **[使用沙盒：把高风险关进盒子](pages/09-使用沙盒.md)** – Docker 镜像/容器模式、挂载与就绪判定。
10. **[使用技能：外挂式工作流](pages/10-使用技能.md)** – 技能包安装/启用/卸载，路径注入系统提示。
11. **[系统架构师：代理的代理](pages/11-系统架构师.md)** – 需求澄清、方案设计、接口与风险输出。
12. **[机体控制：远程接管](pages/12-机体控制.md)** – 开启远程控制、连接/解除、协同安全建议。

## 常见问题（FAQ）
- **装载卡住**：本地查看“模型日志”有无 `ready`；路径/权限/显存是否足够。链接模式确保 endpoint 到 `/v1` 可达，key 与模型名正确。
- **多模态无效**：确认消息已附缩略图/音频图标；本地需勾选视觉/音频模型路径，远端需端点支持 `image_url/input_audio`。
- **工具循环/无输出**：查看输出中是否有 `<tool_call>`/`</tool_call>`，必要时在“约定”调整停用词或关闭工具重试。
- **速度/上下文**：本地可调 batch/线程/`ngl`；链接模式受网络影响。进度条接近满时重置或在“设置”增大 `nctx`（会提升内存/显存占用）。
- **旧 CPU SIGILL**：EVA 已避免 `static QRegularExpression` 触发 PCRE2 JIT；仍有问题请确认使用最新版。

## 本地预览与部署
- 本地预览：`pip install mkdocs mkdocs-material` 后运行 `mkdocs serve`。
- GitHub Pages：`mkdocs build` 生成 `site/`，配合 Actions（如 peaceiris/actions-gh-pages）发布到 gh-pages 分支。

## 维护与反馈
- 更新记录：见 [功能迭代.md](功能迭代.md)。
- 文档改进：欢迎 Issue/PR 反馈。
- 记住：您是指挥员，模型是驾驶员，EVA 是机体。遵循约定框架，协同完成您的野心。
